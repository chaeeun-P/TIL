# 통계학 6주차 정규과제

📌통계학 정규과제는 매주 정해진 분량의 『*데이터 분석가가 반드시 알아야 할 모든 것*』 을 읽고 학습하는 것입니다. 이번 주는 아래의 **Statistics_6th_TIL**에 나열된 분량을 읽고 `학습 목표`에 맞게 공부하시면 됩니다.

아래의 문제를 풀어보며 학습 내용을 점검하세요. 문제를 해결하는 과정에서 개념을 스스로 정리하고, 필요한 경우 추가자료와 교재를 다시 참고하여 보완하는 것이 좋습니다.

6주차는 `3부. 데이터 분석하기`를 읽고 새롭게 배운 내용을 정리해주시면 됩니다.


## Statistics_6th_TIL

### 3부. 데이터 분석하기
### 12.통계 기반 분석 방법론



## Study Schedule

|주차 | 공부 범위     | 완료 여부 |
|----|----------------|----------|
|1주차| 1부 p.2~56     | ✅      |
|2주차| 1부 p.57~79    | ✅      | 
|3주차| 2부 p.82~120   | ✅      | 
|4주차| 2부 p.121~202  | ✅      | 
|5주차| 2부 p.203~254  | ✅      | 
|6주차| 3부 p.300~356  | ✅      | 
|7주차| 3부 p.357~615  | 🍽️      |

<!-- 여기까진 그대로 둬 주세요-->

# 12.통계 기반 분석 방법론

```
✅ 학습 목표 :
* 주성분 분석(PCA)의 개념을 설명할 수 있다.
* 다중공선성을 진단할 수 있다.
* Z-TEST와 T-TEST의 개념을 비교하고, 적절한 상황에서 검정을 설계하고 수행할 수 있다.
* ANOVA TEST를 활용하여 세 개 이상의 그룹 간 평균 차이를 검정하고, 사후검정을 수행할 수 있다.
* 카이제곱 검정을 통해 범주형 변수 간의 독립성과 연관성을 분석하는 방법을 설명할 수 있다.
```

## 12.1. 분석 모델 개요
* 방법론
    * 통계학 기반 통계 모델 : 모양과 해석 중요, 오차와 불확정성 강조 
    * 인공지능 파생 기계 학습 : 대용량 데이터 활용 -> 예측의 정확도 ↑  
    ![사진](/)
* 데이터 분석 방법론 개요  
    ![사진](/images/)  
    ![사진](/)
* 기계 학습 방법론 개요  
    ![사진](/)  
    * 결괏값이 양적이면 회구 사용 / 질적이면 분류
    * 비지도 학습 (자율 학습) : 별도의 정답 X 변수 간의 패턴 파악 or 데이터 군집화 
        * 군집 분석 : 정답지 없이 유사한 관측치들끼리 군집으로 분류 
    * 강화학습 : 동물이 시행착오를 통해 학습하는 과정 

## 12.2. 주성분 분석(PCA)
* 주성분 분석 : 여러 개의 독립변수들을 잘 설명해 줄 수 있는 주된 성분 추출
    * 전체 변수들의 핵심 특성만 선별 -> 독립변수 (차원) 의 수를 줄임  
    * 모형을 간단하게 만들고 분석 결과를 효과적으로 해석
    * *모두 등간 척도나 비율척도로 측정한 양적변수이면서, 관측치들이 서로 독립적이고 정규분포를 이뤄야 함*
* 차원을 감소하는 방법
    * 변수 선택을 통해 비교적 불필요하거나 유의성이 낮은 변수 제거 
    * 변수의 잠재적 성분 추출 -> 차원 줄이기 
        * 공통요인 분석 (CFA, 변수들 사이 존재하는 차원 규명 -> 변수 구조 파악), 주성분 분석 (PCA, 변수의 수 축약하면서 정보 손실 최소화)
* 차원의 저주
    * 데이터 건수가 늘어나면서 예측이 불안정해지는 문제 
    * 변수 ↑ -> 과적합 위험성 ↑ 
    * 다중공선성 문제 발생 
* PCA : 다차원의 데이터 분포를 가장 잘 설명해 주는 성분을 찾아줌 
    * 데이터 공간에 위치하는 점들의 분산을 최대한 보존하는 축을 통해 차원 축소 
        * e.g. 가장 잘 설명하는 성분변수, 그 다음 설명력 변수... -> 여기서 주성분 변수만 선정하여 총 변수 개수 ↓
        * 보통 제1주성분, 제2주성분만으로 대부분의 설명력 포함 -> 두개의 주성분만 선정  
        * 보통 n개의 변수에는 최대 n개의 주성분 생성  
    ![사진](/)
        * 이러한 데이터의 분산 (데이터가 퍼져 있는 정도) 을 가장 잘 표현할 수 있는 저차원을 찾아내는 것  
            ![사진](/)  
        * 주성분의 각 포인트와 거리를 나타내는 직각 선 그리기 -> 직각으로 맞닿는 지점의 분포가 가장 넓게 퍼진 축을 구함 => 각 포인트들의 직각 지점까지의 거리의 합이 가장 큰 축이 주성분이 됨 
            * 데이터에서 가장 분산이 큰 방향을 축으로 고르면, 각 점들이 그 축에 가까이 붙어 있어서, 결과적으로 **"거리의 합이 작아짐"**  
                ![사진](/images/)
                ![사진](/)  
            * 주성분이 갖고 있는 분산 == 설명력 

## 12.3. 공통요인분석 (CFA)
* PCA 와 CFA 는 요인 분석을 하기 위한 기법의 종류
    * 요인 분석 : 데이터의 요인 분석
    * PCA, CFA : 요인분석을 하기 위해 전체 분산을 토대로 요인 추출 (PCA) / 공통 분산만을 토대로 요인 추출 (CFA) 
* CFA : 상관성이 높은 변수들을 묶어 잠재된 몇 개의 변수를 찾음 
    * 무엇이 더 중요하다는 우위 개념 X 
    * 종속 변수에 대한 설명력 차이는 있으나, 기본적으로 종류가 다른 변수를 만들어내는 것이 목적 

### PCA 와 CFA 요인 분석 전 진행하는 검증
* 독립변수들 간의 상관성이 요인 분석에 적합한지 검증 
* 바틀렛 테스트 : 행렬식을 이용하여 카이제곱값을 구하여 변수들 사이의 상관계수의 적합성 검증 -> 유의확률 : p 
    * p < 0.05 -> 대각 행렬 X 변수 간의 상관관계 O 
* KMO 검정 : 변수들 간의 상관관계가 다른 변수에 의해 잘 설명되는 정도를 통계적으로 산출 
    * 상관계수 제곱의 합 / 독립변수들 간의 상관계수 제곱 + 편상관계수 
    * 값 해석  
        ![alt text](/)
* 적합성 검증 후에는 요인분석을 통해 생성되는 주성분 변수들의 고유치 확인 -> 요인의 개수 결정 
    * 고유치 : 요인이 설명해 주는 분산의 양 = 요인에 해당되는 변수들의 요인 적재 값의 제곱 합 값의 합 
    * 고유치가 1 : 해당 요인이 변수 하나만큼의 분산을 가짐 
        * 보통 60% 이상 설명해 주어야 함 
    * 고유치 표 예시  
        ![사진](/)  
* 요인 적재 값 : 각 변수와 요인 간의 상관관계 정도 확인 (선정된 각 요인이 어떤 변수를 설명?) 
    * 적재 값이 +- 0.3 이상 : 유의성 O / +- 0.5 이상 : 해당 요인에서 중요한 변수 

## 12.4. 다중공선성 해결과 섀플리 밸류 분석
* 다중공선성 : 독립변수들 간의 상관관계가 높은 현상 -> 추정치의 통계적 유의성이 낮아져 모델의 정합성 ↓  
    ![사진](/)  
    * 상관계수 절대치 0.7 이상 or 결정계수 값 (R2) 는 크지만 회귀계수에 대한 t값이 낮음 
        * 여기에서의 t값은 해당 변수의 시그널 강도 
        * 표준오차 (노이즈) 대비 시그널을 뜻하기에 값이 클 수록 좋음  
            * 유의확률 0.05수준 (95% 신뢰도) 에서 t값이 +- 1.96 이상이면 적절한 것으로 판단 
            ![사진](/)
    * VIF (분산팽창계수)
        * VIF 가 5 이상이면 다중공선성 의심 / 10 이상이면 다중공선성 있다고 판단 => 제거하는 게 굿 
        * VIF 값에 루트 씌운 값 : 해당 변수가 다른 변수들과의 상관성이 없는 경우보다 표준오차가 X배 높음 
        * VIF 값이 높은 변수들 중에서 종속변수와의 상관성이 가장 낮은 변수를 제거하고 다시 VIF 값 확인 반복 
            * **비즈니스적 요소까지 고려하여 제거** 
    * 표본 관측치를 추가적으로 확보하여 다중공선성 완화 가능
        * 분석 모수가 많아질 수록 회귀계수의 분산과 표준오차 감소 (현실적으로 어려움)
    * 로그를 취하거나, 표준화 및 정규화 변환, 연속형 변수 구간화, 명목변수 변환을 통해 상관성 완화 가능 -> 정보의 손실 발생 가능 
    * 주성분변수를 활용해 유사한 변수를 하나의 변수로 합쳐내는 효과 활용 
    * 데이터 분석 환경에서 제공하는 변수 선택 알고리즘 (e.g. 전진 선택법, 후진 제거법, 단계적 선택법) 활용 
* shapley value : 독립 변수가 종속변수의 설명력에 기여하는 순수한 수치 계산  
    ![사진](/)

## 12.5. 데이터 마사지와 블라인드 분석 
* 데이터 마사지 : 데이터 분석 결과가 예상하거나 의도한 방향과 다를 때 데이터의 배열을 수정하거나 관점을 바꿈 -> 같은 데이터라도 해석 달라지게 함 
    * 수치를 아예 바꾸는 조작과 차이가 있음! 
    * 주관성 개입 -> 배제해야 함 
    * 예시들...  
        ![사진]()  
        ![사진]()  
        ![사진]()  
* 블라인드 분석 : 인지적 / 확증 편향 방지 
    * 오직 결과치만 보고 의미 해석 

## 12.6. Z-test와 T-test
* 집단 내 혹은 집단 간의 평균값 차이가 통계적으로 유의미한 것인지 알아내는 방법 
    * 단일 표본 집단의 평균 변화 or 두 집단의 평균값 혹은 비율 차이 분석
* **양적, 정규 분포, 등분산**이어야 함 
     * 등분산 : 바틀렛 등분산성 검정 
         * 만족 -> equal varuance t-test 수행
         * 만족 X -> 이분산 => welch's t-test 수행 
* 3가지 방법 비교  
    ![사진](/)  
    * t- test
        * 평균의 차이가 클 수록, 표본의 수가 클 수록 t 값 증가 
        * 값 간의 표준편차가 크면 평균의 차이가 불분명해지고 t 값 감소 
        * 두 집단의 평균 차이를 통계적으로 검정하는 방법 
    * Z-test 
        * 비슷하지만 모집단의 분산을 알고 있다는 가정 
        * 모집단의 표준편차 사용 
        * 단일 집단 == 두 집단 비교 공식 

## 12.7. ANOVA
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->

## 12.8. 카이제곱 검정(교차분석)
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->




<br>
<br>

# 확인 문제

### **문제 1.**
> **🧚 경희는 다트비 교육 연구소의 연구원이다. 경희는 이번에 새롭게 개발한 교육 프로그램이 기존 프로그램보다 학습 성취도 향상에 효과적인지 검증하고자 100명의 학생을 무작위로 두 그룹으로 나누어 한 그룹(A)은 새로운 교육 프로그램을, 다른 그룹(B)은 기존 교육 프로그램을 수강하도록 하였다. 실험을 시작하기 전, 두 그룹(A, B)의 초기 시험 점수 평균을 비교한 결과, 유의미한 차이가 없었다. 8주 후, 학생들의 최종 시험 점수를 수집하여 두 그룹 간 평균 점수를 비교하려고 한다.**   

> **🔍 Q1. 이 실험에서 사용할 적절한 검정 방법은 무엇인가요?**

```
여기에 답을 작성해주세요!
```

> **🔍 Q2. 이 실험에서 설정해야 할 귀무가설과 대립가설을 각각 작성하세요.**

```
여기에 답을 작성해주세요!
```

> **🔍 Q3. 검정을 수행하기 위한 절차를 순서대로 서술하세요.**

<!--P.337의 실습 코드 흐름을 확인하여 데이터를 불러온 후부터 어떤 절차로 검정을 수행해야 하는지 고민해보세요.-->

```
여기에 답을 작성해주세요!
```

> **🔍 Q4. 이 검정을 수행할 때 가정해야 하는 통계적 조건을 설명하세요.**

```
여기에 답을 작성해주세요!
```

> **🔍 Q5. 추가적으로 최신 AI 기반 교육 프로그램(C)도 도입하여 기존 프로그램(B) 및 새로운 프로그램(A)과 비교하여 성취도 차이가 있는지 평가하고자 한다면 어떤 검정 방법을 사용해야 하나요? 단, 실험을 시작하기 전, C 그룹의 초기 점수 평균도 A, B 그룹과 유의미한 차이가 없었다고 가정한다.**

```
여기에 답을 작성해주세요!
```

> **🔍 Q6. 5번에서 답한 검정을 수행한 결과, 유의미한 차이가 나타났다면 추가적으로 어떤 검정을 수행해 볼 수 있을까요?**

```
여기에 답을 작성해주세요!
```

---

### **문제 2. 카이제곱 검정**  
> **🧚 다음 중 어떠한 경우에 카이제곱 검정을 사용해야 하나요?   
1️⃣ 제품 A, B, C의 평균 매출 차이를 비교하고자 한다.  
2️⃣ 남성과 여성의 신체 건강 점수 평균 차이를 분석한다.  
3️⃣ 제품 구매 여부(구매/미구매)와 고객의 연령대(10대, 20대, 30대…) 간의 연관성을 분석한다.  
4️⃣ 특정 치료법이 환자의 혈압을 감소시키는 효과가 있는지 확인한다.**  

```
여기에 답을 작성해주세요!
```

### 🎉 수고하셨습니다.